<link rel="import" href="../core.html">

<link rel="import" href="../iwish-login-form/iwish-login-form.html">
<link rel="import" href="../iwish-posts-board/iwish-posts-board.html">
<link rel="import" href="../iwish-add-post/iwish-add-post.html">

<polymer-element name="iwish-app" attributes="">
  <template>
    <link rel="stylesheet" href="iwish-app.css">

  <paper-button
    raised
    class="iwish-test-button show-dialog"
    on-click="{{toggleDialog}}">
      Show dialog
  </paper-button>
  <iwish-dialog
    showDialog="{{showDialog}}"
    transition="core-transition-center">
    <!-- {{showDialog}} -->
  </iwish-dialog>

  <core-animated-pages
    selected="{{selected}}"
    id="coreAppAnimationBlock"
    transitions="cross-fade cross-fade-delayed scale-up slide-up slide-up-offscreen slide-down tile-cascade hero-transition">
    <section>
     <iwish-login-form
        layout
        vertical
        slide-down
        response="{{out}}"
        responsiveWidth="{{responsiveWidth}}">
      </iwish-login-form>
    </section>
    <section>
      <iwish-posts-board
        layout
        vertical
        slide-down
        responsiveWidth="{{responsiveWidth}}">
      </iwish-posts-board>
    </section>
    <section>
        <iwish-add-post
          layout
          vertical
          slide-down
          slide-down></iwish-add-post>
    </section>
  </core-animated-pages>
    <paper-button
      raised
      class="iwish-test-button view-switcher main-switch"
      on-click="{{stuff}}" vertical>
        Next view in app
    </paper-button>
  </template>
  <script>
    Polymer('iwish-app', {
      responsiveWidth: '43em',

      selected: 0,

      showDialog: false,

      out: null,
      up : true,
      max : 2,

      toggleDialog: function () {
        this.showDialog = !this.showDialog;
      },

      stuff: function() {
        console.log('OK = ' + this.out);
        if (this.up && this.selected === this.max || !this.up && this.selected === 0) {
          this.up = !this.up;
        }
        if (this.up) {
          this.selected += 1;
        } else {
          this.selected -= 1;
        }
      }
    });
  </script>
</polymer-element>