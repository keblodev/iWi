<link rel="import" href="./iwish-login/iwish-login.html">
<link rel="import" href="./iwish-forgot/iwish-forgot.html">
<link rel="import" href="./iwish-signup/iwish-signup.html">

<polymer-element name="iwish-login-form" attributes="">
  <template>
  <link rel="stylesheet" href="iwish-login-form.css">

    <div class="main {{ {wide: wide} | tokenList }}" >
      <div id="mainPanel"
        slide-down>
        <core-animated-pages
          selected="{{selected}}"
          transitions="cross-fade cross-fade-delayed scale-up slide-up slide-up-offscreen slide-down tile-cascade hero-transition">
          <section>
            <iwish-login
              slide-down
              response="{{out}}">
            </iwish-login>
          </section>
          <section>
            <iwish-signup
              slide-down
              response="{{out}}">
            </iwish-signup>
          </section>
          <section>
            <iwish-forgot
              slide-down
              response="{{out}}">
            </iwish-forgot>
          </section>
        </core-animated-pages>
      </div>

    </div>
    <core-media-query
      query="min-width: {{responsiveWidth}}"
      queryMatches="{{wide}}">
    </core-media-query>
    <paper-button
      raised
      cross-fade
      class="view-switcher sub-switch"
      on-click="{{stuff}}">Next in login form
    </paper-button>
  </template>
  <script>

    Polymer('iwish-login-form' , {
      responsiveWidth: '33em',

      publish: {
        response: "ValuePassedBackToParent 1"
      },

      selected: 0,

      out: null,
      up : true,
      max : 2,
      stuff : function() {
        if (this.up && this.selected === this.max || !this.up && this.selected === 0) {
          this.up = !this.up;
        }
        if (this.up) {
          this.selected += 1;
        } else {
          this.selected -= 1;
        }
      }
    });

  </script>
</polymer-element>